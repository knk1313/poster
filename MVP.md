# AI自動投稿システム MVP 仕様

対象: 雑学・教養系アカウント（初期テーマ「世界の偉人と名言」）

## 1. 目的

- 1日3回、定時に「偉人の名言 + 短い解説 + 雑学 + ハッシュタグ + 画像」を自動生成し、Instagramへ自動投稿する。
- 投稿内容は教育的で正確性を重視し、断定を避ける。

## 2. MVPの前提

- 投稿対象は Instagram ビジネス/クリエイターアカウント。
- 画像生成は必須。OpenAIを利用する。
- スケジューラはCloud Schedulerを使用（Cloud Run 経由）。
- 永続化はCloud SQL（PostgreSQL）。
- 画像の公開URLはCloud Storageで用意する。
- メトリクス取得はMVPでは不要。
- サブテーマ: 文学。
- 固定ハッシュタグ: #名言 #今日の偉人。

## 3. 機能要件

### 3.1 投稿テキスト生成

入力:
- テーマ: 世界の偉人と名言
- サブテーマ: 文学
- 言語: 日本語

出力（構造化）:
- figure_name: 偉人名
- quote: 名言
- source: 出典（不明なら「諸説あり」）
- short_explain: 背景・解説（短文）
- trivia: 雑学（短文）
- hashtags: 変動タグ
- post_text: 投稿本文（Instagramの上限内）

ルール:
- 断定が危険な逸話は避ける or 注釈。
- 同一人物・同一名言の短期重複は避ける（30日目安）。

### 3.2 画像生成

- 形式: PNGまたはJPEG
- 推奨サイズ: 1024x1024（正方形）
- スタイル: ポスター調、象徴的表現
- 文字入れは原則なし
- 実在人物の写真風は避ける
- 画像は公開URLで参照できる必要がある（Instagram API要件）
- Cloud Storageに保存し、公開URLを使って投稿する

### 3.3 スケジューラ

- 1日3回、固定時刻で実行（例: 08:00 / 13:00 / 20:00 JST）
- Cloud SchedulerからHTTPで起動

### 3.4 Instagram自動投稿

- Instagram Graph API を使用
- 画像URLを指定してコンテナ作成 → 公開
- 失敗時はログに残す

### 3.5 永続化

- Cloud SQL（PostgreSQL）に投稿内容・画像パス・投稿結果を保存

## 4. 非機能要件

- APIキーは環境変数で管理する
- 投稿が失敗しても次回実行で再試行できる構成

## 5. 運用メモ

実行方法、DB構造、ローカル構成、認証情報は `README.md` にまとめる。
